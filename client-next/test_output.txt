
[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90mC:/Users/Antigravity/AiGuardian/client-next[39m

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mDebug[2m > [22m[2mloads apiSlice
[22m[39mTest Store Created with Middleware

node.exe : [90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mDebug[2m > [22m[2mloads apiSlice
At C:\nvm4w\nodejs\npx.ps1:29 char:3
+   & $NODE_EXE $NPX_CLI_JS $args
+   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ( 
   [90mstderr[2m...mloads apiSlice:String)  
   [], RemoteException
    + FullyQualifiedErrorId : NativeCommandEr 
   ror
 
[22m[39mapiSlice Loaded. Endpoints: [
  [32m'getAuthMe'[39m,
  [32m'authLogin'[39m,
  [32m'authLogout'[39m,
  [32m'authSetPassword'[39m,
  [32m'sendChatMessage'[39m,
  [32m'getFeed'[39m,
  [32m'deleteFeed'[39m,
  [32m'uploadFile'[39m,
  [32m'getLiteLLMUserInfo'[39m
]
Middleware: [36m[Function: middleware][39m
Store created successfully. State: {"api":{"qu
eries":{},"mutations":{},"provided":{"tags":{}
,"keys":{}},"subscriptions":{},"config":{"onli
ne":true,"focused":true,"middlewareRegistered"
:false,"refetchOnFocus":false,"refetchOnReconn
ect":false,"refetchOnMountOrArgChange":false,"
keepUnusedDataFor":60,"reducerPath":"api","inv
alidationBehavior":"delayed"}},"user":{"user":
null,"isLoading":false,"error":null}}

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mdirectly triggers fetch via store
[22m[39mTest Store Created with Middleware
Dispatching: api/executeQuery/pending
Dispatching: api/config/middlewareRegistered
[apiSlice] getFeed query called with userId: direct-user
Dispatching: api/subscriptions/internal_getRTKQSubscriptions

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mdirectly 
triggers fetch via store
[22m[39m[apiSlice] baseQuery executing for 
args: {
  url: [32m'/api/proxy/feed'[39m,
  method: [32m'GET'[39m,
  headers: { [32m'X-User-ID'[39m: 
[32m'direct-user'[39m }
}
[apiSlice] prepareHeaders called
[apiSlice] Headers prepared: {
  [32m'x-device-id'[39m: [32m'f1d37ba3-f148
-4ff9-b84f-99fcf29f3c43'[39m,
  [32m'x-user-id'[39m: 
[32m'direct-user'[39m
}

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mdirectly 
triggers fetch via store
[22m[39mAn unhandled error occurred 
processing a request for the endpoint 
"getFeed".
In the case of an unhandled error, no tags 
will be "provided" or "invalidated". 
TypeError: Failed to parse URL from 
/api/proxy/api/proxy/feed
[90m    at new Request (node:internal/deps/un
dici/undici:9588:19)[39m
    at new Request [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:548:11[90m)[39m
[90m    ... 5 lines matching cause stack 
trace ...[39m
    at [90mfile:///C:/Users/Antigravity/AiGua
rdian/client-next/[39mnode_modules/[4m@redux
js[24m/toolkit/dist/redux-toolkit.modern.mjs:
946:27
    at async Promise.all (index 1) {
  [cause]: TypeError: Invalid URL
  [90m    at new URL 
(node:internal/url:818:25)[39m
      at new URL$1 [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:556:9[90m)[39m
  [90m    at new Request (node:internal/deps/
undici/undici:9586:25)[39m
      at new Request [90m(file:///C:/Users/An
tigravity/AiGuardian/client-next/[39mnode_mod
ules/[4mvitest[24m/dist/chunks/index.BspFP3m
n.js:548:11[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/query/rtk-query.modern.
mjs:226:21
  [90m    at processTicksAndRejections 
(node:internal/process/task_queues:105:5)[39m
      at baseQuery (C:/Users/Antigravity/AiGua
rdian/client-next/app/store/api/apiSlice.ts:71
:18)
      at executeRequest [90m(file:///C:/Users
/Antigravity/AiGuardian/client-next/[39mnode_
modules/[4m@reduxjs[24m/toolkit/dist/query/r
tk-query.modern.mjs:942:20[90m)[39m
      at executeEndpoint [90m(file:///C:/User
s/Antigravity/AiGuardian/client-next/[39mnode
_modules/[4m@reduxjs[24m/toolkit/dist/query/
rtk-query.modern.mjs:1034:33[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/redux-toolkit.modern.mj
s:946:27 {
    code: [32m'ERR_INVALID_URL'[39m,
    input: 
[32m'/api/proxy/api/proxy/feed'[39m
  }
}

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mdirectly triggers fetch via store
[22m[39mDispatching: api/executeQuery/rejected

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mprioritizes userId prop over localStorage
[22m[39mTest Store Created with Middleware
Dispatching: api/subscriptions/internal_getRTKQSubscriptions
Dispatching: api/config/middlewareRegistered
Dispatching: api/executeQuery/pending
[apiSlice] getFeed query called with userId: prop-user

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mprioritizes 
userId prop over localStorage
[22m[39m[FeedPanel] usage: effectiveUserId: 
prop-user useMock: [33mfalse[39m NODE_ENV: 
test
[FeedPanel] feedData: [90mundefined[39m
[apiSlice] baseQuery executing for args: {
  url: [32m'/api/proxy/feed'[39m,
  method: [32m'GET'[39m,
  headers: { [32m'X-User-ID'[39m: 
[32m'prop-user'[39m }
}
[apiSlice] prepareHeaders called
[apiSlice] Headers prepared: {
  [32m'x-device-id'[39m: [32m'31d4b6c4-cc0a
-48c0-bbfc-efe6058b6e84'[39m,
  [32m'x-user-id'[39m: 
[32m'stored-user'[39m
}
[FeedPanel] usage: effectiveUserId: prop-user 
useMock: [33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mprioritizes 
userId prop over localStorage
[22m[39mAn unhandled error occurred 
processing a request for the endpoint 
"getFeed".
In the case of an unhandled error, no tags 
will be "provided" or "invalidated". 
TypeError: Failed to parse URL from 
/api/proxy/api/proxy/feed
[90m    at new Request (node:internal/deps/un
dici/undici:9588:19)[39m
    at new Request [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:548:11[90m)[39m
[90m    ... 5 lines matching cause stack 
trace ...[39m
    at [90mfile:///C:/Users/Antigravity/AiGua
rdian/client-next/[39mnode_modules/[4m@redux
js[24m/toolkit/dist/redux-toolkit.modern.mjs:
946:27
    at async Promise.all (index 1) {
  [cause]: TypeError: Invalid URL
  [90m    at new URL 
(node:internal/url:818:25)[39m
      at new URL$1 [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:556:9[90m)[39m
  [90m    at new Request (node:internal/deps/
undici/undici:9586:25)[39m
      at new Request [90m(file:///C:/Users/An
tigravity/AiGuardian/client-next/[39mnode_mod
ules/[4mvitest[24m/dist/chunks/index.BspFP3m
n.js:548:11[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/query/rtk-query.modern.
mjs:226:21
  [90m    at processTicksAndRejections 
(node:internal/process/task_queues:105:5)[39m
      at baseQuery (C:/Users/Antigravity/AiGua
rdian/client-next/app/store/api/apiSlice.ts:71
:18)
      at executeRequest [90m(file:///C:/Users
/Antigravity/AiGuardian/client-next/[39mnode_
modules/[4m@reduxjs[24m/toolkit/dist/query/r
tk-query.modern.mjs:942:20[90m)[39m
      at executeEndpoint [90m(file:///C:/User
s/Antigravity/AiGuardian/client-next/[39mnode
_modules/[4m@reduxjs[24m/toolkit/dist/query/
rtk-query.modern.mjs:1034:33[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/redux-toolkit.modern.mj
s:946:27 {
    code: [32m'ERR_INVALID_URL'[39m,
    input: 
[32m'/api/proxy/api/proxy/feed'[39m
  }
}

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mprioritizes userId prop over localStorage
[22m[39mDispatching: api/executeQuery/rejected

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mprioritizes 
userId prop over localStorage
[22m[39m[FeedPanel] usage: effectiveUserId: 
prop-user useMock: [33mfalse[39m NODE_ENV: 
test
[FeedPanel] feedData: [90mundefined[39m
Feed API error: {
  name: [32m'TypeError'[39m,
  message: [32m'Failed to parse URL from 
/api/proxy/api/proxy/feed'[39m,
  stack: [32m'TypeError: Failed to parse URL 
from /api/proxy/api/proxy/feed\n'[39m +
    [32m'    at new Request (node:internal/de
ps/undici/undici:9588:19)\n'[39m +
    [32m'    at new Request (file:///C:/Users
/Antigravity/AiGuardian/client-next/node_modul
es/vitest/dist/chunks/index.BspFP3mn.js:548:11
)\n'[39m +
    [32m'    at file:///C:/Users/Antigravity/
AiGuardian/client-next/node_modules/@reduxjs/t
oolkit/dist/query/rtk-query.modern.mjs:226:21\
n'[39m +
    [32m'    at processTicksAndRejections (no
de:internal/process/task_queues:105:5)\n'[39m
 +
    [32m'    at baseQuery (C:/Users/Antigravi
ty/AiGuardian/client-next/app/store/api/apiSli
ce.ts:71:18)\n'[39m +
    [32m'    at executeRequest (file:///C:/Us
ers/Antigravity/AiGuardian/client-next/node_mo
dules/@reduxjs/toolkit/dist/query/rtk-query.mo
dern.mjs:942:20)\n'[39m +
    [32m'    at executeEndpoint (file:///C:/U
sers/Antigravity/AiGuardian/client-next/node_m
odules/@reduxjs/toolkit/dist/query/rtk-query.m
odern.mjs:1034:33)\n'[39m +
    [32m'    at file:///C:/Users/Antigravity/
AiGuardian/client-next/node_modules/@reduxjs/t
oolkit/dist/redux-toolkit.modern.mjs:946:27\n'
[39m +
    [32m'    at async Promise.all (index 
1)'[39m
}

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mprioritizes 
userId prop over localStorage
[22m[39m[FeedPanel] usage: effectiveUserId: 
prop-user useMock: [33mfalse[39m NODE_ENV: 
test
[FeedPanel] feedData: [90mundefined[39m
[FeedPanel] usage: effectiveUserId: prop-user 
useMock: [33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
An error occurred in the <FeedPanel> 
component.

Consider adding an error boundary to your 
tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries 
to learn more about error boundaries.


[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mprioritizes userId prop over localStorage
[22m[39mDispatching: api/subscriptions/unsubscribeQueryResult

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mfalls back to localStorage if prop is missing
[22m[39mTest Store Created with Middleware
Dispatching: api/subscriptions/internal_getRTKQSubscriptions
Dispatching: api/config/middlewareRegistered
Dispatching: api/executeQuery/pending
[apiSlice] getFeed query called with userId: stored-user

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mfalls back 
to localStorage if prop is missing
[22m[39m[FeedPanel] usage: effectiveUserId: 
stored-user useMock: [33mfalse[39m 
NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
[apiSlice] baseQuery executing for args: {
  url: [32m'/api/proxy/feed'[39m,
  method: [32m'GET'[39m,
  headers: { [32m'X-User-ID'[39m: 
[32m'stored-user'[39m }
}
[apiSlice] prepareHeaders called
[apiSlice] Headers prepared: {
  [32m'x-device-id'[39m: [32m'67e7f1aa-2acf
-4b5d-99e6-2b4f2bda5990'[39m,
  [32m'x-user-id'[39m: 
[32m'stored-user'[39m
}
[FeedPanel] usage: effectiveUserId: 
stored-user useMock: [33mfalse[39m 
NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mfalls back 
to localStorage if prop is missing
[22m[39mAn unhandled error occurred 
processing a request for the endpoint 
"getFeed".
In the case of an unhandled error, no tags 
will be "provided" or "invalidated". 
TypeError: Failed to parse URL from 
/api/proxy/api/proxy/feed
[90m    at new Request (node:internal/deps/un
dici/undici:9588:19)[39m
    at new Request [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:548:11[90m)[39m
[90m    ... 5 lines matching cause stack 
trace ...[39m
    at async Promise.all (index 1) {
  [cause]: TypeError: Invalid URL
  [90m    at new URL 
(node:internal/url:818:25)[39m
      at new URL$1 [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:556:9[90m)[39m
  [90m    at new Request (node:internal/deps/
undici/undici:9586:25)[39m
      at new Request [90m(file:///C:/Users/An
tigravity/AiGuardian/client-next/[39mnode_mod
ules/[4mvitest[24m/dist/chunks/index.BspFP3m
n.js:548:11[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/query/rtk-query.modern.
mjs:226:21
      at baseQuery (C:/Users/Antigravity/AiGua
rdian/client-next/app/store/api/apiSlice.ts:71
:18)
      at executeRequest [90m(file:///C:/Users
/Antigravity/AiGuardian/client-next/[39mnode_
modules/[4m@reduxjs[24m/toolkit/dist/query/r
tk-query.modern.mjs:942:20[90m)[39m
      at executeEndpoint [90m(file:///C:/User
s/Antigravity/AiGuardian/client-next/[39mnode
_modules/[4m@reduxjs[24m/toolkit/dist/query/
rtk-query.modern.mjs:1034:33[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/redux-toolkit.modern.mj
s:946:27
      at async Promise.all (index 1) {
    code: [32m'ERR_INVALID_URL'[39m,
    input: 
[32m'/api/proxy/api/proxy/feed'[39m
  }
}

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mfalls back to localStorage if prop is missing
[22m[39mDispatching: api/executeQuery/rejected

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mfalls back 
to localStorage if prop is missing
[22m[39m[FeedPanel] usage: effectiveUserId: 
stored-user useMock: [33mfalse[39m 
NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
Feed API error: {
  name: [32m'TypeError'[39m,
  message: [32m'Failed to parse URL from 
/api/proxy/api/proxy/feed'[39m,
  stack: [32m'TypeError: Failed to parse URL 
from /api/proxy/api/proxy/feed\n'[39m +
    [32m'    at new Request (node:internal/de
ps/undici/undici:9588:19)\n'[39m +
    [32m'    at new Request (file:///C:/Users
/Antigravity/AiGuardian/client-next/node_modul
es/vitest/dist/chunks/index.BspFP3mn.js:548:11
)\n'[39m +
    [32m'    at file:///C:/Users/Antigravity/
AiGuardian/client-next/node_modules/@reduxjs/t
oolkit/dist/query/rtk-query.modern.mjs:226:21\
n'[39m +
    [32m'    at baseQuery (C:/Users/Antigravi
ty/AiGuardian/client-next/app/store/api/apiSli
ce.ts:71:18)\n'[39m +
    [32m'    at executeRequest (file:///C:/Us
ers/Antigravity/AiGuardian/client-next/node_mo
dules/@reduxjs/toolkit/dist/query/rtk-query.mo
dern.mjs:942:20)\n'[39m +
    [32m'    at executeEndpoint (file:///C:/U
sers/Antigravity/AiGuardian/client-next/node_m
odules/@reduxjs/toolkit/dist/query/rtk-query.m
odern.mjs:1034:33)\n'[39m +
    [32m'    at file:///C:/Users/Antigravity/
AiGuardian/client-next/node_modules/@reduxjs/t
oolkit/dist/redux-toolkit.modern.mjs:946:27\n'
[39m +
    [32m'    at async Promise.all (index 
1)'[39m
}

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2mfalls back 
to localStorage if prop is missing
[22m[39m[FeedPanel] usage: effectiveUserId: 
stored-user useMock: [33mfalse[39m 
NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
[FeedPanel] usage: effectiveUserId: 
stored-user useMock: [33mfalse[39m 
NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
An error occurred in the <FeedPanel> 
component.

Consider adding an error boundary to your 
tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries 
to learn more about error boundaries.


[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2mfalls back to localStorage if prop is missing
[22m[39mDispatching: api/subscriptions/unsubscribeQueryResult

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2muses empty string if neither are present
[22m[39mTest Store Created with Middleware
Dispatching: api/subscriptions/internal_getRTKQSubscriptions
Dispatching: api/config/middlewareRegistered
Dispatching: api/executeQuery/pending
[apiSlice] getFeed query called with userId: [90mundefined[39m

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2muses empty 
string if neither are present
[22m[39m[FeedPanel] usage: effectiveUserId: 
 useMock: [33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
[apiSlice] baseQuery executing for args: { 
url: [32m'/api/proxy/feed'[39m, method: 
[32m'GET'[39m, headers: {} }
[apiSlice] prepareHeaders called
[apiSlice] Headers prepared: { 
[32m'x-device-id'[39m: [32m'8cf40a43-01f3-4
ba0-9597-54628d7a2f8d'[39m }
[FeedPanel] usage: effectiveUserId:  useMock: 
[33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2muses empty 
string if neither are present
[22m[39mAn unhandled error occurred 
processing a request for the endpoint 
"getFeed".
In the case of an unhandled error, no tags 
will be "provided" or "invalidated". 
TypeError: Failed to parse URL from 
/api/proxy/api/proxy/feed
[90m    at new Request (node:internal/deps/un
dici/undici:9588:19)[39m
    at new Request [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:548:11[90m)[39m
[90m    ... 5 lines matching cause stack 
trace ...[39m
    at async Promise.all (index 1) {
  [cause]: TypeError: Invalid URL
  [90m    at new URL 
(node:internal/url:818:25)[39m
      at new URL$1 [90m(file:///C:/Users/Anti
gravity/AiGuardian/client-next/[39mnode_modul
es/[4mvitest[24m/dist/chunks/index.BspFP3mn.
js:556:9[90m)[39m
  [90m    at new Request (node:internal/deps/
undici/undici:9586:25)[39m
      at new Request [90m(file:///C:/Users/An
tigravity/AiGuardian/client-next/[39mnode_mod
ules/[4mvitest[24m/dist/chunks/index.BspFP3m
n.js:548:11[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/query/rtk-query.modern.
mjs:226:21
      at baseQuery (C:/Users/Antigravity/AiGua
rdian/client-next/app/store/api/apiSlice.ts:71
:18)
      at executeRequest [90m(file:///C:/Users
/Antigravity/AiGuardian/client-next/[39mnode_
modules/[4m@reduxjs[24m/toolkit/dist/query/r
tk-query.modern.mjs:942:20[90m)[39m
      at executeEndpoint [90m(file:///C:/User
s/Antigravity/AiGuardian/client-next/[39mnode
_modules/[4m@reduxjs[24m/toolkit/dist/query/
rtk-query.modern.mjs:1034:33[90m)[39m
      at [90mfile:///C:/Users/Antigravity/AiG
uardian/client-next/[39mnode_modules/[4m@red
uxjs[24m/toolkit/dist/redux-toolkit.modern.mj
s:946:27
      at async Promise.all (index 1) {
    code: [32m'ERR_INVALID_URL'[39m,
    input: 
[32m'/api/proxy/api/proxy/feed'[39m
  }
}

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2muses empty string if neither are present
[22m[39mDispatching: api/executeQuery/rejected

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2muses empty 
string if neither are present
[22m[39m[FeedPanel] usage: effectiveUserId: 
 useMock: [33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
Feed API error: {
  name: [32m'TypeError'[39m,
  message: [32m'Failed to parse URL from 
/api/proxy/api/proxy/feed'[39m,
  stack: [32m'TypeError: Failed to parse URL 
from /api/proxy/api/proxy/feed\n'[39m +
    [32m'    at new Request (node:internal/de
ps/undici/undici:9588:19)\n'[39m +
    [32m'    at new Request (file:///C:/Users
/Antigravity/AiGuardian/client-next/node_modul
es/vitest/dist/chunks/index.BspFP3mn.js:548:11
)\n'[39m +
    [32m'    at file:///C:/Users/Antigravity/
AiGuardian/client-next/node_modules/@reduxjs/t
oolkit/dist/query/rtk-query.modern.mjs:226:21\
n'[39m +
    [32m'    at baseQuery (C:/Users/Antigravi
ty/AiGuardian/client-next/app/store/api/apiSli
ce.ts:71:18)\n'[39m +
    [32m'    at executeRequest (file:///C:/Us
ers/Antigravity/AiGuardian/client-next/node_mo
dules/@reduxjs/toolkit/dist/query/rtk-query.mo
dern.mjs:942:20)\n'[39m +
    [32m'    at executeEndpoint (file:///C:/U
sers/Antigravity/AiGuardian/client-next/node_m
odules/@reduxjs/toolkit/dist/query/rtk-query.m
odern.mjs:1034:33)\n'[39m +
    [32m'    at file:///C:/Users/Antigravity/
AiGuardian/client-next/node_modules/@reduxjs/t
oolkit/dist/redux-toolkit.modern.mjs:946:27\n'
[39m +
    [32m'    at async Promise.all (index 
1)'[39m
}

[90mstderr[2m | 
app/components/UserPropagation.test.tsx[2m > 
[22m[2mUser Identity Propagation[2m > 
[22m[2mFeedPanel[2m > [22m[2muses empty 
string if neither are present
[22m[39m[FeedPanel] usage: effectiveUserId: 
 useMock: [33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
[FeedPanel] usage: effectiveUserId:  useMock: 
[33mfalse[39m NODE_ENV: test
[FeedPanel] feedData: [90mundefined[39m
An error occurred in the <FeedPanel> 
component.

Consider adding an error boundary to your 
tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries 
to learn more about error boundaries.


[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mFeedPanel[2m > [22m[2muses empty string if neither are present
[22m[39mDispatching: api/subscriptions/unsubscribeQueryResult

[90mstdout[2m | app/components/UserPropagation.test.tsx[2m > [22m[2mUser Identity Propagation[2m > [22m[2mChatPanel[2m > [22m[2muses userId prop in headers
[22m[39mTest Store Created with Middleware

 [31m❯[39m app/components/UserPropagation.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 3186[2mms[22m[39m
       [32m✓[39m loads apiSlice[32m 8[2mms[22m[39m
[31m       [31m×[31m directly triggers fetch via store[39m[32m 46[2mms[22m[39m
[31m       [31m×[31m prioritizes userId prop over localStorage[39m[33m 1042[2mms[22m[39m
[31m       [31m×[31m falls back to localStorage if prop is missing[39m[33m 1009[2mms[22m[39m
[31m       [31m×[31m uses empty string if neither are present[39m[33m 1018[2mms[22m[39m
[31m       [31m×[31m uses userId prop in headers[39m[32m 60[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 5 
[49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m 
app/components/UserPropagation.test.tsx[2m > 
[22mUser Identity Propagation[2m > 
[22mFeedPanel[2m > [22mdirectly triggers 
fetch via store
[31m[1mAssertionError[22m: expected 
"vi.fn()" to be called with arguments: [ …(2) 
][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m❯[22m app/components/UserPropagatio
n.test.tsx:[2m122:34[22m[39m
    [90m120| [39m            
[35mconst[39m { store } [33m=[39m [34mren
derWithProvider[39m([33m<[39m[33mdiv[39m
[33m>[39m[33m<[39m[33m/[39m[33mdiv[39m
[33m>[39m)[33m;[39m
    [90m121| [39m            await store.dis
patch(apiSlice.endpoints.getFeed.initiate('…
    [90m122| [39m            [34mexpect[39
m(global[33m.[39mfetch)[33m.[39m[34mtoHav
eBeenCalledWith[39m(
    [90m   | [39m                           
      [31m^[39m
    [90m123| [39m                expect[33m
.[39m[34mstringContaining[39m([32m'/api/pr
oxy/feed'[39m)[33m,[39m
    [90m124| [39m                
expect[33m.[39m[34mobjectContaining[39m({

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/5]⎯[22m[
39m

[41m[1m FAIL [22m[49m 
app/components/UserPropagation.test.tsx[2m > 
[22mUser Identity Propagation[2m > 
[22mFeedPanel[2m > [22mprioritizes userId 
prop over localStorage
[31m[1mAssertionError[22m: expected 
"vi.fn()" to be called with arguments: [ …(2) 
][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m❯[22m app/components/UserPropagatio
n.test.tsx:[2m142:38[22m[39m
    [90m140| [39m            [90m// We 
wait for fetch to be called.[39m
    [90m141| [39m            
[35mawait[39m [34mwaitFor[39m(() 
[33m=>[39m {
    [90m142| [39m                [34mexpect
[39m(global[33m.[39mfetch)[33m.[39m[34mt
oHaveBeenCalledWith[39m(
    [90m   | [39m                           
          [31m^[39m
    [90m143| [39m                    expect
[33m.[39m[34mstringContaining[39m([32m'/ap
i/proxy/feed'[39m)[33m,[39m
    [90m144| [39m                    
expect[33m.[39m[34mobjectContaining[39m({
[90m [2m❯[22m 
runWithExpensiveErrorDiagnosticsDisabled node_
modules/@testing-library/dom/dist/config.js:[
2m47:12[22m[39m
[90m [2m❯[22m checkCallback node_modules/@t
esting-library/dom/dist/wait-for.js:[2m124:77
[22m[39m
[90m [2m❯[22m 
Timeout.checkRealTimersCallback node_modules/@
testing-library/dom/dist/wait-for.js:[2m118:1
6[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/5]⎯[22m[
39m

[41m[1m FAIL [22m[49m 
app/components/UserPropagation.test.tsx[2m > 
[22mUser Identity Propagation[2m > 
[22mFeedPanel[2m > [22mfalls back to 
localStorage if prop is missing
[31m[1mAssertionError[22m: expected 
"vi.fn()" to be called with arguments: [ …(2) 
][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m❯[22m app/components/UserPropagatio
n.test.tsx:[2m159:38[22m[39m
    [90m157| [39m
    [90m158| [39m            
[35mawait[39m [34mwaitFor[39m(() 
[33m=>[39m {
    [90m159| [39m                [34mexpect
[39m(global[33m.[39mfetch)[33m.[39m[34mt
oHaveBeenCalledWith[39m(
    [90m   | [39m                           
          [31m^[39m
    [90m160| [39m                    expect
[33m.[39m[34mstringContaining[39m([32m'/ap
i/proxy/feed'[39m)[33m,[39m
    [90m161| [39m                    
expect[33m.[39m[34mobjectContaining[39m({
[90m [2m❯[22m 
runWithExpensiveErrorDiagnosticsDisabled node_
modules/@testing-library/dom/dist/config.js:[
2m47:12[22m[39m
[90m [2m❯[22m checkCallback node_modules/@t
esting-library/dom/dist/wait-for.js:[2m124:77
[22m[39m
[90m [2m❯[22m 
Timeout.checkRealTimersCallback node_modules/@
testing-library/dom/dist/wait-for.js:[2m118:1
6[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/5]⎯[22m[
39m

[41m[1m FAIL [22m[49m 
app/components/UserPropagation.test.tsx[2m > 
[22mUser Identity Propagation[2m > 
[22mFeedPanel[2m > [22muses empty string 
if neither are present
[31m[1mAssertionError[22m: expected 
"vi.fn()" to be called with arguments: [ …(2) 
][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m❯[22m app/components/UserPropagatio
n.test.tsx:[2m195:38[22m[39m
    [90m193| [39m
    [90m194| [39m            
[35mawait[39m [34mwaitFor[39m(() 
[33m=>[39m {
    [90m195| [39m                [34mexpect
[39m(global[33m.[39mfetch)[33m.[39m[34mt
oHaveBeenCalledWith[39m(
    [90m   | [39m                           
          [31m^[39m
    [90m196| [39m                    expect
[33m.[39m[34mstringContaining[39m([32m'/ap
i/proxy/feed'[39m)[33m,[39m
    [90m197| [39m                    expect
[33m.[39m[34many[39m([33mObject[39m)
[90m [2m❯[22m 
runWithExpensiveErrorDiagnosticsDisabled node_
modules/@testing-library/dom/dist/config.js:[
2m47:12[22m[39m
[90m [2m❯[22m checkCallback node_modules/@t
esting-library/dom/dist/wait-for.js:[2m124:77
[22m[39m
[90m [2m❯[22m 
Timeout.checkRealTimersCallback node_modules/@
testing-library/dom/dist/wait-for.js:[2m118:1
6[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/5]⎯[22m[
39m

[41m[1m FAIL [22m[49m 
app/components/UserPropagation.test.tsx[2m > 
[22mUser Identity Propagation[2m > 
[22mChatPanel[2m > [22muses userId prop in 
headers
[31m[1mTypeError[22m: 
messagesEndRef.current?.scrollIntoView is not 
a function[39m
[36m [2m❯[22m scrollToBottom app/components
/ChatPanel.tsx:[2m71:33[22m[39m
    [90m 69| [39m
    [90m 70| [39m    [35mconst[39m 
scrollToBottom [33m=[39m () [33m=>[39m {
    [90m 71| [39m        messagesEndRef[33m
.[39mcurrent[33m?.[39m[34mscrollIntoView[
39m({ behavior[33m:[39m [32m"smooth"[39m 
})[33m;[39m
    [90m   | [39m                           
     [31m^[39m
    [90m 72| [39m    }[33m;[39m
    [90m 73| [39m
[90m [2m❯[22m app/components/ChatPanel.tsx:
[2m75:9[22m[39m
[90m [2m❯[22m 
Object.react_stack_bottom_frame node_modules/r
eact-dom/cjs/react-dom-client.development.js:
[2m25989:20[22m[39m
[90m [2m❯[22m runWithFiberInDEV node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m874:13[22m[39m
[90m [2m❯[22m commitHookEffectListMount nod
e_modules/react-dom/cjs/react-dom-client.devel
opment.js:[2m13249:29[22m[39m
[90m [2m❯[22m 
commitHookPassiveMountEffects node_modules/rea
ct-dom/cjs/react-dom-client.development.js:[2
m13336:11[22m[39m
[90m [2m❯[22m commitPassiveMountOnFiber nod
e_modules/react-dom/cjs/react-dom-client.devel
opment.js:[2m15484:13[22m[39m
[90m [2m❯[22m 
recursivelyTraversePassiveMountEffects node_mo
dules/react-dom/cjs/react-dom-client.developme
nt.js:[2m15439:11[22m[39m
[90m [2m❯[22m commitPassiveMountOnFiber nod
e_modules/react-dom/cjs/react-dom-client.devel
opment.js:[2m15718:11[22m[39m
[90m [2m❯[22m 
recursivelyTraversePassiveMountEffects node_mo
dules/react-dom/cjs/react-dom-client.developme
nt.js:[2m15439:11[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/5]⎯[22m[
39m

[31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Unhandled Errors 
[49m[22m[31m⎯⎯⎯⎯⎯⎯[39m
[31m[1m
Vitest caught 3 unhandled errors during the 
test run.
This might cause false positive tests. 
Resolve unhandled errors to make sure your 
tests are not affected.[22m[39m

[31m⎯⎯⎯⎯⎯[39m[1m[41m Uncaught Exception 
[49m[22m[31m⎯⎯⎯⎯⎯[39m
[31m[1mError[22m: [vitest] No 
"API_BASE_URL" export is defined on the 
"../utils/api" mock. Did you forget to return 
it from "vi.mock"?
If you need to partially mock a module, you 
can use "importOriginal" helper inside:
[39m
vi.mock(import("../utils/api"), async 
(importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

[90m [2m❯[22m VitestMocker.createError node
_modules/vitest/dist/chunks/startModuleRunner.
DpqpB8k3.js:[2m311:17[22m[39m
[90m [2m❯[22m Object.get node_modules/vites
t/dist/chunks/startModuleRunner.DpqpB8k3.js:[
2m384:16[22m[39m
[36m [2m❯[22m FeedPanel app/components/Feed
Panel.tsx:[2m322:86[22m[39m
    [90m320| [39m                           
 <div className="text-red-600 text-sm mb-3"…
    [90m321| [39m                           
 [33m<[39m[33mdiv[39m [33mclassName[39m
[33m=[39m[32m"text-red-500 
text-xs"[39m[33m>[39m
    [90m322| [39m                           
     Feed API: <code className="bg-red-100 …
    [90m   | [39m                           
                                              
            [31m^[39m
    [90m323| [39m                           
 
[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
    [90m324| [39m                        
[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
[90m [2m❯[22m 
Object.react_stack_bottom_frame node_modules/r
eact-dom/cjs/react-dom-client.development.js:
[2m25904:20[22m[39m
[90m [2m❯[22m renderWithHooks node_modules/
react-dom/cjs/react-dom-client.development.js:
[2m7662:22[22m[39m
[90m [2m❯[22m updateFunctionComponent node_
modules/react-dom/cjs/react-dom-client.develop
ment.js:[2m10166:19[22m[39m
[90m [2m❯[22m beginWork node_modules/react-
dom/cjs/react-dom-client.development.js:[2m11
778:18[22m[39m
[90m [2m❯[22m runWithFiberInDEV node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m874:13[22m[39m
[90m [2m❯[22m performUnitOfWork node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m17641:22[22m[39m
[90m [2m❯[22m workLoopSync node_modules/rea
ct-dom/cjs/react-dom-client.development.js:[2
m17469:41[22m[39m

[31mThis error originated in "[1mapp/compone
nts/UserPropagation.test.tsx[22m" test file. 
It doesn't mean the error was thrown inside 
the file itself, but while it was 
running.[39m
[31mThe latest test that might've caused the 
error is "[1mprioritizes userId prop over 
localStorage[22m". It might mean one of the 
following:
- The error was thrown, while Vitest was 
running this test.
- If the error occurred after the test had 
been completed, this was the last documented 
test before it was thrown.[39m

[31m⎯⎯⎯⎯⎯[39m[1m[41m Uncaught Exception 
[49m[22m[31m⎯⎯⎯⎯⎯[39m
[31m[1mError[22m: [vitest] No 
"API_BASE_URL" export is defined on the 
"../utils/api" mock. Did you forget to return 
it from "vi.mock"?
If you need to partially mock a module, you 
can use "importOriginal" helper inside:
[39m
vi.mock(import("../utils/api"), async 
(importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

[90m [2m❯[22m VitestMocker.createError node
_modules/vitest/dist/chunks/startModuleRunner.
DpqpB8k3.js:[2m311:17[22m[39m
[90m [2m❯[22m Object.get node_modules/vites
t/dist/chunks/startModuleRunner.DpqpB8k3.js:[
2m384:16[22m[39m
[36m [2m❯[22m FeedPanel app/components/Feed
Panel.tsx:[2m322:86[22m[39m
    [90m320| [39m                           
 <div className="text-red-600 text-sm mb-3"…
    [90m321| [39m                           
 [33m<[39m[33mdiv[39m [33mclassName[39m
[33m=[39m[32m"text-red-500 
text-xs"[39m[33m>[39m
    [90m322| [39m                           
     Feed API: <code className="bg-red-100 …
    [90m   | [39m                           
                                              
            [31m^[39m
    [90m323| [39m                           
 
[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
    [90m324| [39m                        
[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
[90m [2m❯[22m 
Object.react_stack_bottom_frame node_modules/r
eact-dom/cjs/react-dom-client.development.js:
[2m25904:20[22m[39m
[90m [2m❯[22m renderWithHooks node_modules/
react-dom/cjs/react-dom-client.development.js:
[2m7662:22[22m[39m
[90m [2m❯[22m updateFunctionComponent node_
modules/react-dom/cjs/react-dom-client.develop
ment.js:[2m10166:19[22m[39m
[90m [2m❯[22m beginWork node_modules/react-
dom/cjs/react-dom-client.development.js:[2m11
778:18[22m[39m
[90m [2m❯[22m runWithFiberInDEV node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m874:13[22m[39m
[90m [2m❯[22m performUnitOfWork node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m17641:22[22m[39m
[90m [2m❯[22m workLoopSync node_modules/rea
ct-dom/cjs/react-dom-client.development.js:[2
m17469:41[22m[39m

[31mThis error originated in "[1mapp/compone
nts/UserPropagation.test.tsx[22m" test file. 
It doesn't mean the error was thrown inside 
the file itself, but while it was 
running.[39m
[31mThe latest test that might've caused the 
error is "[1mfalls back to localStorage if 
prop is missing[22m". It might mean one of 
the following:
- The error was thrown, while Vitest was 
running this test.
- If the error occurred after the test had 
been completed, this was the last documented 
test before it was thrown.[39m

[31m⎯⎯⎯⎯⎯[39m[1m[41m Uncaught Exception 
[49m[22m[31m⎯⎯⎯⎯⎯[39m
[31m[1mError[22m: [vitest] No 
"API_BASE_URL" export is defined on the 
"../utils/api" mock. Did you forget to return 
it from "vi.mock"?
If you need to partially mock a module, you 
can use "importOriginal" helper inside:
[39m
vi.mock(import("../utils/api"), async 
(importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

[90m [2m❯[22m VitestMocker.createError node
_modules/vitest/dist/chunks/startModuleRunner.
DpqpB8k3.js:[2m311:17[22m[39m
[90m [2m❯[22m Object.get node_modules/vites
t/dist/chunks/startModuleRunner.DpqpB8k3.js:[
2m384:16[22m[39m
[36m [2m❯[22m FeedPanel app/components/Feed
Panel.tsx:[2m322:86[22m[39m
    [90m320| [39m                           
 <div className="text-red-600 text-sm mb-3"…
    [90m321| [39m                           
 [33m<[39m[33mdiv[39m [33mclassName[39m
[33m=[39m[32m"text-red-500 
text-xs"[39m[33m>[39m
    [90m322| [39m                           
     Feed API: <code className="bg-red-100 …
    [90m   | [39m                           
                                              
            [31m^[39m
    [90m323| [39m                           
 
[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
    [90m324| [39m                        
[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
[90m [2m❯[22m 
Object.react_stack_bottom_frame node_modules/r
eact-dom/cjs/react-dom-client.development.js:
[2m25904:20[22m[39m
[90m [2m❯[22m renderWithHooks node_modules/
react-dom/cjs/react-dom-client.development.js:
[2m7662:22[22m[39m
[90m [2m❯[22m updateFunctionComponent node_
modules/react-dom/cjs/react-dom-client.develop
ment.js:[2m10166:19[22m[39m
[90m [2m❯[22m beginWork node_modules/react-
dom/cjs/react-dom-client.development.js:[2m11
778:18[22m[39m
[90m [2m❯[22m runWithFiberInDEV node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m874:13[22m[39m
[90m [2m❯[22m performUnitOfWork node_module
s/react-dom/cjs/react-dom-client.development.j
s:[2m17641:22[22m[39m
[90m [2m❯[22m workLoopSync node_modules/rea
ct-dom/cjs/react-dom-client.development.js:[2
m17469:41[22m[39m

[31mThis error originated in "[1mapp/compone
nts/UserPropagation.test.tsx[22m" test file. 
It doesn't mean the error was thrown inside 
the file itself, but while it was 
running.[39m
[31mThe latest test that might've caused the 
error is "[1muses empty string if neither 
are present[22m". It might mean one of the 
following:
- The error was thrown, while Vitest was 
running this test.
- If the error occurred after the test had 
been completed, this was the last documented 
test before it was thrown.[39m
[31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[2m     Errors [22m [1m[31m3 errors[39m[22m
[2m   Start at [22m 11:08:45
[2m   Duration [22m 5.85s[2m (transform 305ms, setup 0ms, import 1.24s, tests 3.19s, environment 1.17s)[22m

